document.addEventListener('DOMContentLoaded', () => {
  const params = new URLSearchParams(location.search);
  const version = params.get('version') || '–';
  document.getElementById('version').textContent = version;
  
  const features = [
    'We’ ve updated the site blocking logic to make the extension faster and more reliable.',
    'New rules are now added or removed directly in the popup or on the settings page— without reloading all rules.',
    'Synchronization has also been improved: rules are automatically restored after restarting the browser and stay consistent across all your devices.'
  ];
  
  const ul = document.getElementById('features');
  features.forEach(item => {
    const li = document.createElement('li');
    li.textContent = item;
    ul.append(li);
  });
  
  const closeBtn = document.getElementById('close-btn');
  
  closeBtn.addEventListener('click', () => {
    browser.runtime.sendMessage({
      type: 'close_current_tab'
    });
  });
});